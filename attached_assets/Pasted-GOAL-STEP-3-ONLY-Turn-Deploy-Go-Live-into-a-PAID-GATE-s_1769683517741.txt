GOAL (STEP 3 ONLY)
Turn Deploy / Go-Live into a PAID GATE so revenue is generated.
Users can build, preview, and estimate costs for free, but must pay to go live.

SCOPE RULES
1) Additive only. Do NOT refactor existing Deploy Wizard, Preview, or Builder logic.
2) Reuse existing Deploy Wizard steps and Pre-Flight checks.
3) Mobile-first UI.
4) RBAC:
   - owner/admin can pay and go live
   - staff/viewer see “Ask admin to go live”
5) Proof-first: screenshots + API evidence required.

PAYMENT MODEL (SIMPLE)
- Monthly subscription plans:
  • Pro: $39/month (1 live app)
  • Business: $99/month (up to 5 live apps)
- Free tier:
  • Unlimited build + preview
  • NO go-live

WHAT TO BUILD (FRONTEND)
A) Deploy Wizard Gating
- In /dashboard/deploy:
  • If pre-flight PASSES and user clicks “Go Live”
  • Check subscription status
  • If NOT paid → show Paywall modal/page

B) Paywall UI
- Clear message:
  “Go Live requires an active subscription”
- Show plan comparison (Pro vs Business)
- CTA: “Subscribe & Go Live”
- Show what happens after payment (instant unlock)

C) Payment Success Flow
- On successful payment:
  • Mark workspace subscription active
  • Unlock Go-Live button
  • Allow transition: verified → live
- Show success confirmation

WHAT TO BUILD (BACKEND)
If not already present:
- POST /api/billing/checkout
  • Creates Stripe Checkout Session
  • Input: plan_id
- POST /api/billing/webhook
  • Handle subscription.created / updated / canceled
- GET /api/billing/status
  • Returns subscription status for current workspace

DATA RULES
- Subscription is workspace-scoped
- One active subscription per workspace
- Audit logs:
  SUBSCRIPTION_STARTED
  SUBSCRIPTION_CANCELED
  GO_LIVE_UNLOCKED

ERROR HANDLING
- Human-friendly errors only
- If payment fails or webhook delayed, show clear guidance

SECURITY
- Do NOT expose Stripe keys
- Webhook signature verification required
- Idempotent webhook handling

PROOF REQUIREMENTS (MANDATORY)
Provide:
1) Screenshot:
   - Go-Live button triggering Paywall
2) Screenshot:
   - Paywall with plan options
3) Screenshot:
   - Post-payment success state (Go-Live unlocked)
4) API evidence:
   - billing/checkout request
   - billing/status response
5) proof.md update:
   - pricing rules
   - gating logic
   - webhook events handled

STOP CONDITION
Stop after STEP 3 is complete and proven.
Do NOT start STEP 4 (Landing page / Marketing).