STEP 18 — DEVICE PROOF PACK (MANDATORY). NO EXCUSES.

You must collect REAL iPhone (Expo Go) proof. Do not say “cannot run”.
If you cannot access the device, instruct the user with exact steps and then
wait for the user’s screenshots/logs. But you MUST output a proof checklist and
what evidence you collected.

GOAL: Close STEP 18 with device verification for:
1) SecureStore persistence
2) Deep linking
3) Push notification receive

A) SECURESTORE PROOF (REAL DEVICE)
1) Open the mobile app in Expo Go on iPhone.
2) Login.
3) Force close the app (swipe away).
4) Reopen the app.
PASS CRITERIA:
- User remains logged in (session persisted) OR you show “Loaded token” logs.
EVIDENCE REQUIRED:
- Screenshot #1: After login (shows authenticated screen)
- Screenshot #2: After force-close + reopen (still authenticated)
OPTIONAL LOG (if available):
- Console snippet showing [SecureStore] Saved... and Loaded...

B) DEEP LINK PROOF (REAL DEVICE)
1) On iPhone Safari address bar, type:
platformfactory://preview/abc123
2) Confirm app opens and navigates to Preview screen (token visible).
PASS CRITERIA:
- App opens via deep link and lands on Preview screen.
EVIDENCE REQUIRED:
- Screenshot #3: Preview screen opened from deep link (token abc123 visible)
OPTIONAL LOG:
- [DeepLink] Processing: platformfactory://preview/abc123

C) PUSH NOTIFICATION PROOF (REAL DEVICE)
1) In app Settings, tap “Enable notifications”.
2) Accept permission prompt (Allow).
3) Capture the REAL Expo Push Token from the app UI (ExponentPushToken[...]).
4) Register token (raw API output required):
curl -s -X POST http://localhost:5000/api/push/register \
  -H "Authorization: Bearer <ADMIN_TOKEN>" \
  -H "x-tenant-id: <TENANT_ID>" \
  -H "Content-Type: application/json" \
  -d '{"expoPushToken":"ExponentPushToken[REAL_TOKEN]","deviceInfo":{"platform":"ios","modelName":"iPhone"}}'

5) Send test push (raw API output required):
curl -s -X POST http://localhost:5000/api/push/test \
  -H "Authorization: Bearer <ADMIN_TOKEN>" \
  -H "x-tenant-id: <TENANT_ID>" \
  -H "Content-Type: application/json" \
  -d '{"title":"PlatformFactory Test","body":"Push OK"}'

PASS CRITERIA:
- /api/push/test returns success (NOT DeviceNotRegistered)
- iPhone shows the push notification banner/popup
EVIDENCE REQUIRED:
- Screenshot #4: iOS notification banner/popup visible
- Raw JSON output of register + test push

D) ARTIFACT UPDATE
1) Update reports/step18-proof.md with a “DEVICE PROOF” section including:
- the 4 screenshots (filenames or links)
- the raw curl outputs
- pass/fail checklist
2) Paste:
- first 40 lines of reports/step18-proof.md (DEVICE PROOF section)
- git status
- list changed files

STOP after providing proofs. Do NOT start any next steps.