STEP 26 (EXPO MOBILE BUILDER) — PROOF-FIRST VERIFICATION (NO CLAIMS WITHOUT RAW OUTPUT)

You provided a summary of 6 endpoints + workflow. Now I need RAW PROOF that it actually works end-to-end.

MANDATORY: Paste raw command outputs. No paraphrase. No “works” statements without evidence.

A) SERVER + ROUTE REGISTRATION LOOKS REAL
1) Show startup logs where mobile routes are registered (or express router mounted path).
2) Show curl health:
   curl -s http://localhost:5000/api/health
   curl -s http://localhost:5000/api/ready

B) AUTH + RBAC PROOF (must be enforced)
1) Call any mobile endpoint WITHOUT auth:
   curl -i -X POST http://localhost:5000/api/mobile/spec/draft -H "Content-Type: application/json" -d '{"prompt":"test"}'
   Paste output (must be 401)
2) Call with STAFF token (or non-admin role) if available:
   must be 403
3) Call with OWNER/ADMIN token:
   must succeed (200)

C) END-TO-END FLOW PROOF (DRAFT → APPROVE → GENERATE → DOWNLOAD)
Use real IDs from outputs. Paste all responses.

C1) Draft:
curl -s -X POST http://localhost:5000/api/mobile/spec/draft \
-H "Authorization: Bearer $ADMIN_TOKEN" \
-H "x-tenant-id: $TENANT_ID" \
-H "Content-Type: application/json" \
-d '{"prompt":"Build a booking app with login and Bengali support","target":"expo"}'

C2) List specs:
curl -s http://localhost:5000/api/mobile/specs \
-H "Authorization: Bearer $ADMIN_TOKEN" \
-H "x-tenant-id: $TENANT_ID"

C3) Approve:
curl -s -X POST http://localhost:5000/api/mobile/spec/approve \
-H "Authorization: Bearer $ADMIN_TOKEN" \
-H "x-tenant-id: $TENANT_ID" \
-H "Content-Type: application/json" \
-d '{"specId":"<SPEC_ID_FROM_C1>"}'

C4) Generate:
curl -s -X POST http://localhost:5000/api/mobile/project/generate \
-H "Authorization: Bearer $ADMIN_TOKEN" \
-H "x-tenant-id: $TENANT_ID" \
-H "Content-Type: application/json" \
-d '{"approvedSpecId":"<SPEC_ID_FROM_C1>","target":"expo"}'

C5) List jobs:
curl -s http://localhost:5000/api/mobile/jobs \
-H "Authorization: Bearer $ADMIN_TOKEN" \
-H "x-tenant-id: $TENANT_ID"

C6) Download zip:
curl -I http://localhost:5000/api/mobile/download/<JOB_ID_FROM_C4> \
-H "Authorization: Bearer $ADMIN_TOKEN" \
-H "x-tenant-id: $TENANT_ID"
(Show headers; must be 200 + application/zip)

Then actually download:
curl -L http://localhost:5000/api/mobile/download/<JOB_ID> \
-H "Authorization: Bearer $ADMIN_TOKEN" \
-H "x-tenant-id: $TENANT_ID" \
-o /tmp/mobile_build.zip

D) ZIP CONTENT PROOF (must match claimed features)
Run:
unzip -l /tmp/mobile_build.zip
Paste the full file list. It MUST include:
- app.json (scheme platformfactory://)
- eas.json
- Expo Router routes: app/_layout.tsx and at least preview/[token].tsx + invite/[token].tsx
- SecureStore auth helper file(s)
- Deep link handler file(s)
- Home + Settings tabs
- README_MOBILE.md
Also show 2 file snippets (first 60 lines) from:
1) app/_layout.tsx
2) src/auth (or wherever SecureStore is used)

E) RATE LIMIT PROOF (must really throttle)
Hit draft endpoint 21 times fast and show:
- first 20 allowed
- 21st returns 429 + Retry-After
Paste the last 3 outputs including headers.

F) EXPIRY + CLEANUP PROOF (24h expiry + cleanup job)
1) Show job record has expiresAt.
2) Trigger cleanup job manually (if job exists) and show output.
3) If you can’t wait 24h, simulate an expired job by setting expiresAt in DB then run cleanup and show that file is removed.

G) REGRESSION
1) ./scripts/smoke.sh (full output)
2) ./scripts/verify.sh (last ~40 lines)
3) git status
4) git diff --name-only

H) ARTIFACT
Create reports/step26-proof.md with:
- all commands + outputs
- IDs used
- zip file list
- regression outputs
STOP after finishing.