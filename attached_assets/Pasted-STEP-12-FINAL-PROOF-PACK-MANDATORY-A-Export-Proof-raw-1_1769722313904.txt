STEP 12 FINAL PROOF PACK (MANDATORY)

A) Export Proof (raw)
1) Start export:
curl -s -X POST http://localhost:5000/api/exports/tenant \
  -H "Authorization: Bearer <OWNER_TOKEN>" \
  -H "x-tenant-id: <TENANT_ID>"

2) Poll status until ready (paste one READY response):
curl -s http://localhost:5000/api/exports/tenant/<EXPORT_ID> \
  -H "Authorization: Bearer <OWNER_TOKEN>" \
  -H "x-tenant-id: <TENANT_ID>"

3) Download (prove HTTP 200 + content type):
curl -I http://localhost:5000/api/exports/tenant/<EXPORT_ID>/download \
  -H "Authorization: Bearer <OWNER_TOKEN>" \
  -H "x-tenant-id: <TENANT_ID>"

4) Actually download and list ZIP contents:
curl -s -o /tmp/tenant-export.zip \
  http://localhost:5000/api/exports/tenant/<EXPORT_ID>/download \
  -H "Authorization: Bearer <OWNER_TOKEN>" \
  -H "x-tenant-id: <TENANT_ID>"

unzip -l /tmp/tenant-export.zip | head -n 60

ZIP must include:
tenant.json, users.json, memberships.json, modules.json, connectors.json,
billing.json (invoices/payments), audit_logs.json

B) Backup Snapshot Proof (raw)
1) Create snapshot:
curl -s -X POST http://localhost:5000/api/backups/snapshot \
  -H "Authorization: Bearer <OWNER_TOKEN>" \
  -H "x-tenant-id: <TENANT_ID>"

2) List snapshots:
curl -s http://localhost:5000/api/backups/snapshots \
  -H "Authorization: Bearer <OWNER_TOKEN>" \
  -H "x-tenant-id: <TENANT_ID>"

C) Safe Delete + Restore Proof (raw)
1) Request delete (get token):
curl -s -X POST http://localhost:5000/api/tenants/<TENANT_ID>/request-delete \
  -H "Authorization: Bearer <OWNER_TOKEN>" \
  -H "x-tenant-id: <TENANT_ID>"

2) Confirm delete with token:
curl -s -X POST http://localhost:5000/api/tenants/<TENANT_ID>/confirm-delete \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <OWNER_TOKEN>" \
  -H "x-tenant-id: <TENANT_ID>" \
  -d '{"token":"<TOKEN_FROM_1>"}'

3) Status shows deleted/disabled:
curl -s http://localhost:5000/api/tenants/<TENANT_ID>/status \
  -H "Authorization: Bearer <OWNER_TOKEN>" \
  -H "x-tenant-id: <TENANT_ID>"

4) Restore:
curl -s -X POST http://localhost:5000/api/tenants/<TENANT_ID>/restore \
  -H "Authorization: Bearer <OWNER_TOKEN>" \
  -H "x-tenant-id: <TENANT_ID>"

5) Status shows active again:
curl -s http://localhost:5000/api/tenants/<TENANT_ID>/status \
  -H "Authorization: Bearer <OWNER_TOKEN>" \
  -H "x-tenant-id: <TENANT_ID>"

D) RBAC Proof
- Run export or delete endpoints with STAFF token â†’ must return 403 (paste one output + status)

E) Regression Proof
- Paste outputs:
  ./scripts/verify.sh (PASS)
  ./scripts/smoke.sh (PASS)

F) Artifacts
- Paste top section of reports/step12-proof.md
- List changed files + git status
